/*! This code was generated automatically using the Popcorn Dynamic Build Tool
 *Get it at www.github.com/cadecairos/PopcornDynamicBuildTool
 *This Source Code Form is subject to the terms of the MIT license
 *If a copy of the MIT license was not distributed with this file, you can
 *obtain one at https://github.com/mozilla/popcorn-js/blob/master/LICENSE 

 *timeline,subtitle,image,code,footnote,timeline-sources
 *parsers: XML,VTT,TTXT,TTML,SRT,SBV,SSA
*/

(function(e,t){function g(e,t){return function(){if(m.plugin.debug){return e.apply(this,arguments)}try{return e.apply(this,arguments)}catch(n){m.plugin.errors.push({plugin:t,thrown:n,source:e.toString()});this.emit("pluginerror",m.plugin.errors)}}}if(!t.addEventListener){e.Popcorn={isSupported:false};var n=("removeInstance addInstance getInstanceById removeInstanceById "+"forEach extend effects error guid sizeOf isArray nop position disable enable destroy"+"addTrackEvent removeTrackEvent getTrackEvents getTrackEvent getLastTrackEventId "+"timeUpdate plugin removePlugin compose effect xhr getJSONP getScript").split(/\s+/);while(n.length){e.Popcorn[n.shift()]=function(){}}return}var r=Array.prototype,i=Object.prototype,s=r.forEach,o=r.slice,u=i.hasOwnProperty,a=i.toString,f=e.Popcorn,l=[],c=false,h=false,p={events:{hash:{},apis:{}}},d=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t,n){e.setTimeout(t,16)}}(),v=function(e){return Object.keys?Object.keys(e):function(e){var t,n=[];for(t in e){if(u.call(e,t)){n.push(t)}}return n}(e)},m=function(e,t){return new m.p.init(e,t||null)};m.version="@VERSION";m.isSupported=true;m.instances=[];m.p=m.prototype={init:function(e,n){var r,i=this;if(typeof e==="function"){if(t.readyState==="complete"){e(t,m);return}l.push(e);if(!c){c=true;var s=function(){h=true;t.removeEventListener("DOMContentLoaded",s,false);for(var e=0,n=l.length;e<n;e++){l[e].call(t,m)}l=null};t.addEventListener("DOMContentLoaded",s,false)}return}if(typeof e==="string"){try{r=t.querySelector(e)}catch(o){throw new Error("Popcorn.js Error: Invalid media element selector: "+e)}}this.media=r||e;this[this.media.nodeName&&this.media.nodeName.toLowerCase()||"video"]=this.media;m.instances.push(this);this.options=n||{};this.isDestroyed=false;this.data={running:{cue:[]},timeUpdate:m.nop,disabled:{},events:{},hooks:{},history:[],state:{volume:this.media.volume},trackRefs:{},trackEvents:{byStart:[{start:-1,end:-1}],byEnd:[{start:-1,end:-1}],animating:[],startIndex:0,endIndex:0,previousUpdateTime:-1}};var u=function(){if(i.media.currentTime<0){i.media.currentTime=0}i.media.removeEventListener("loadeddata",u,false);var e,t,n,r,s,o;e=i.media.duration;t=e!=e?Number.MAX_VALUE:e+1;m.addTrackEvent(i,{start:t,end:t});if(i.options.frameAnimation){i.data.timeUpdate=function(){m.timeUpdate(i,{});m.forEach(m.manifest,function(e,t){n=i.data.running[t];if(n){s=n.length;for(var u=0;u<s;u++){r=n[u];o=r._natives;o&&o.frame&&o.frame.call(i,{},r,i.currentTime())}}});i.emit("timeupdate");!i.isDestroyed&&d(i.data.timeUpdate)};!i.isDestroyed&&d(i.data.timeUpdate)}else{i.data.timeUpdate=function(e){m.timeUpdate(i,e)};if(!i.isDestroyed){i.media.addEventListener("timeupdate",i.data.timeUpdate,false)}}};Object.defineProperty(this,"error",{get:function(){return i.media.error}});if(i.media.readyState>=2){u()}else{i.media.addEventListener("loadeddata",u,false)}return this}};m.p.init.prototype=m.p;m.forEach=function(e,t,n){if(!e||!t){return{}}n=n||this;var r,i;if(s&&e.forEach===s){return e.forEach(t,n)}if(a.call(e)==="[object NodeList]"){for(r=0,i=e.length;r<i;r++){t.call(n,e[r],r,e)}return e}for(r in e){if(u.call(e,r)){t.call(n,e[r],r,e)}}return e};m.extend=function(e){var t=e,n=o.call(arguments,1);m.forEach(n,function(e){for(var n in e){t[n]=e[n]}});return t};m.extend(m,{noConflict:function(t){if(t){e.Popcorn=f}return m},error:function(e){throw new Error(e)},guid:function(e){m.guid.counter++;return(e?e:"")+(+(new Date)+m.guid.counter)},sizeOf:function(e){var t=0;for(var n in e){t++}return t},isArray:Array.isArray||function(e){return a.call(e)==="[object Array]"},nop:function(){},position:function(n){var r=n.getBoundingClientRect(),i={},s=n.ownerDocument,o=t.documentElement,u=t.body,a,f,l,c,h,p;a=o.clientTop||u.clientTop||0;f=o.clientLeft||u.clientLeft||0;l=e.pageYOffset&&o.scrollTop||u.scrollTop;c=e.pageXOffset&&o.scrollLeft||u.scrollLeft;h=Math.ceil(r.top+l-a);p=Math.ceil(r.left+c-f);for(var d in r){i[d]=Math.round(r[d])}return m.extend({},i,{top:h,left:p})},disable:function(e,t){if(!e.data.disabled[t]){e.data.disabled[t]=true;for(var n=e.data.running[t].length-1,r;n>=0;n--){r=e.data.running[t][n];r._natives.end.call(e,null,r)}}return e},enable:function(e,t){if(e.data.disabled[t]){e.data.disabled[t]=false;for(var n=e.data.running[t].length-1,r;n>=0;n--){r=e.data.running[t][n];r._natives.start.call(e,null,r)}}return e},destroy:function(e){var t=e.data.events,n=e.data.trackEvents,r,i,s,o;for(i in t){r=t[i];for(s in r){delete r[s]}t[i]=null}n.byStart.length=0;n.byEnd.length=0;for(o in m.registryByName){m.removePlugin(e,o)}if(!e.isDestroyed){e.data.timeUpdate&&e.media.removeEventListener("timeupdate",e.data.timeUpdate,false);e.isDestroyed=true}}});m.guid.counter=1;m.extend(m.p,function(){var e="load play pause currentTime playbackRate volume duration preload playbackRate "+"autoplay loop controls muted buffered readyState seeking paused played seekable ended",t={};m.forEach(e.split(/\s+/g),function(e){t[e]=function(t){var n;if(typeof this.media[e]==="function"){if(t!=null&&/play|pause/.test(e)){this.media.currentTime=m.util.toSeconds(t)}this.media[e]();return this}if(t!=null){n=this.media[e];this.media[e]=t;if(n!==t){this.emit("attrchange",{attribute:e,previousValue:n,currentValue:t})}return this}return this.media[e]}});return t}());m.forEach("enable disable".split(" "),function(e){m.p[e]=function(t){return m[e](this,t)}});m.extend(m.p,{roundTime:function(){return-~this.media.currentTime},exec:function(e,t,n){var r=arguments.length,i,s;try{s=m.util.toSeconds(e)}catch(o){}if(typeof s==="number"){e=s}if(typeof e==="number"&&r===2){n=t;t=e;e=m.guid("cue")}else{if(r===1){t=-1}else{i=this.getTrackEvent(e);if(i){if(typeof e==="string"&&r===2){if(typeof t==="number"){n=i._natives.start}if(typeof t==="function"){n=t;t=i.start}}}else{if(r>=2){if(typeof t==="string"){try{s=m.util.toSeconds(t)}catch(o){}t=s}if(typeof t==="number"){n=m.nop()}if(typeof t==="function"){n=t;t=-1}}}}}m.addTrackEvent(this,{id:e,start:t,end:t+1,_running:false,_natives:{start:n||m.nop,end:m.nop,type:"cue"}});return this},mute:function(e){var t=e==null||e===true?"muted":"unmuted";if(t==="unmuted"){this.media.muted=false;this.media.volume=this.data.state.volume}if(t==="muted"){this.data.state.volume=this.media.volume;this.media.muted=true}this.emit(t);return this},unmute:function(e){return this.mute(e==null?false:!e)},position:function(){return m.position(this.media)},toggle:function(e){return m[this.data.disabled[e]?"enable":"disable"](this,e)},defaults:function(e,t){if(m.isArray(e)){m.forEach(e,function(e){for(var t in e){this.defaults(t,e[t])}},this);return this}if(!this.options.defaults){this.options.defaults={}}if(!this.options.defaults[e]){this.options.defaults[e]={}}m.extend(this.options.defaults[e],t);return this}});m.Events={UIEvents:"blur focus focusin focusout load resize scroll unload",MouseEvents:"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave click dblclick",Events:"loadstart progress suspend emptied stalled play pause error "+"loadedmetadata loadeddata waiting playing canplay canplaythrough "+"seeking seeked timeupdate ended ratechange durationchange volumechange"};m.Events.Natives=m.Events.UIEvents+" "+m.Events.MouseEvents+" "+m.Events.Events;p.events.apiTypes=["UIEvents","MouseEvents","Events"];(function(e,t){var n=p.events.apiTypes,r=e.Natives.split(/\s+/g),i=0,s=r.length,o;for(;i<s;i++){t.hash[r[i]]=true}n.forEach(function(n,r){t.apis[n]={};var i=e[n].split(/\s+/g),s=i.length,o=0;for(;o<s;o++){t.apis[n][i[o]]=true}})})(m.Events,p.events);m.events={isNative:function(e){return!!p.events.hash[e]},getInterface:function(e){if(!m.events.isNative(e)){return false}var t=p.events,n=t.apiTypes,r=t.apis,i=0,s=n.length,o,u;for(;i<s;i++){u=n[i];if(r[u][e]){o=u;break}}return o},all:m.Events.Natives.split(/\s+/g),fn:{trigger:function(n,r){var i,s;if(this.data.events[n]&&m.sizeOf(this.data.events[n])){i=m.events.getInterface(n);if(i){s=t.createEvent(i);s.initEvent(n,true,true,e,1);this.media.dispatchEvent(s);return this}m.forEach(this.data.events[n],function(e,t){e.call(this,r)},this)}return this},listen:function(e,t){var n=this,r=true,i=m.events.hooks[e],s=e,o;if(!this.data.events[e]){this.data.events[e]={};r=false}if(i){if(i.add){i.add.call(this,{},t)}if(i.bind){e=i.bind}if(i.handler){o=t;t=function(t){i.handler.call(n,t,o)}}r=true;if(!this.data.events[e]){this.data.events[e]={};r=false}}this.data.events[e][t.name||t.toString()+m.guid()]=t;if(!r&&m.events.all.indexOf(e)>-1){this.media.addEventListener(e,function(t){m.forEach(n.data.events[e],function(e,r){if(typeof e==="function"){e.call(n,t)}})},false)}return this},unlisten:function(e,t){if(this.data.events[e]&&this.data.events[e][t]){delete this.data.events[e][t];return this}this.data.events[e]=null;return this}},hooks:{canplayall:{bind:"canplaythrough",add:function(e,t){var n=false;if(this.media.readyState){t.call(this,e);n=true}this.data.hooks.canplayall={fired:n}},handler:function(t,n){if(!this.data.hooks.canplayall.fired){n.call(this,t);this.data.hooks.canplayall.fired=true}}}}};m.forEach([["trigger","emit"],["listen","on"],["unlisten","off"]],function(e){m.p[e[0]]=m.p[e[1]]=m.events.fn[e[0]]});m.addTrackEvent=function(e,t){var n,r,i;if(t.id){n=e.getTrackEvent(t.id)}if(n){r=true;t=m.extend({},n,t);e.removeTrackEvent(t.id)}if(t&&t._natives&&t._natives.type&&e.options.defaults&&e.options.defaults[t._natives.type]){t=m.extend({},e.options.defaults[t._natives.type],t)}if(t._natives){t._id=t.id||t._id||m.guid(t._natives.type);e.data.history.push(t._id)}t.start=m.util.toSeconds(t.start,e.options.framerate);t.end=m.util.toSeconds(t.end,e.options.framerate);var s=e.data.trackEvents.byStart,o=e.data.trackEvents.byEnd,u,a;for(u=s.length-1;u>=0;u--){if(t.start>=s[u].start){s.splice(u+1,0,t);break}}for(a=o.length-1;a>=0;a--){if(t.end>o[a].end){o.splice(a+1,0,t);break}}if(t.end>e.media.currentTime&&t.start<=e.media.currentTime){t._running=true;e.data.running[t._natives.type].push(t);if(!e.data.disabled[t._natives.type]){t._natives.start.call(e,null,t)}}if(u<=e.data.trackEvents.startIndex&&t.start<=e.data.trackEvents.previousUpdateTime){e.data.trackEvents.startIndex++}if(a<=e.data.trackEvents.endIndex&&t.end<e.data.trackEvents.previousUpdateTime){e.data.trackEvents.endIndex++}this.timeUpdate(e,null,true);if(t._id){m.addTrackEvent.ref(e,t)}if(r){if(t._natives.type==="cue"){i="cuechange"}else{i="trackchange"}e.emit(i,{id:t.id,previousValue:{time:n.start,fn:n._natives.start},currentValue:{time:t.start,fn:t._natives.start}})}};m.addTrackEvent.ref=function(e,t){e.data.trackRefs[t._id]=t;return e};m.removeTrackEvent=function(e,t){var n,r,i,s=e.data.history.length,o=e.data.trackEvents.byStart.length,u=0,a=0,f=[],l=[],c=[],h=[];while(--o>-1){n=e.data.trackEvents.byStart[u];r=e.data.trackEvents.byEnd[u];if(!n._id){f.push(n);l.push(r)}if(n._id){if(n._id!==t){f.push(n)}if(r._id!==t){l.push(r)}if(n._id===t){a=u;if(n._natives._teardown){n._natives._teardown.call(e,n)}}}u++}o=e.data.trackEvents.animating.length;u=0;if(o){while(--o>-1){i=e.data.trackEvents.animating[u];if(!i._id){c.push(i)}if(i._id&&i._id!==t){c.push(i)}u++}}if(a<=e.data.trackEvents.startIndex){e.data.trackEvents.startIndex--}if(a<=e.data.trackEvents.endIndex){e.data.trackEvents.endIndex--}e.data.trackEvents.byStart=f;e.data.trackEvents.byEnd=l;e.data.trackEvents.animating=c;for(var p=0;p<s;p++){if(e.data.history[p]!==t){h.push(e.data.history[p])}}e.data.history=h;m.removeTrackEvent.ref(e,t)};m.removeTrackEvent.ref=function(e,t){delete e.data.trackRefs[t];return e};m.getTrackEvents=function(e){var t=[],n=e.data.trackEvents.byStart,r=n.length,i=0,s;for(;i<r;i++){s=n[i];if(s._id){t.push(s)}}return t};m.getTrackEvents.ref=function(e){return e.data.trackRefs};m.getTrackEvent=function(e,t){return e.data.trackRefs[t]};m.getTrackEvent.ref=function(e,t){return e.data.trackRefs[t]};m.getLastTrackEventId=function(e){return e.data.history[e.data.history.length-1]};m.timeUpdate=function(e,t){var n=e.media.currentTime,r=e.data.trackEvents.previousUpdateTime,i=e.data.trackEvents,s=i.endIndex,o=i.startIndex,u=i.byStart.length,a=i.byEnd.length,f=m.registryByName,l="trackstart",c="trackend",h,p,d,v,g,y;if(r<=n){while(i.byEnd[s]&&i.byEnd[s].end<=n){h=i.byEnd[s];v=h._natives;g=v&&v.type;if(!v||!!f[g]||!!e[g]){if(h._running===true){h._running=false;y=e.data.running[g];y.splice(y.indexOf(h),1);if(!e.data.disabled[g]){v.end.call(e,t,h);e.emit(c,m.extend({},h,{plugin:g,type:c}))}}s++}else{m.removeTrackEvent(e,h._id);return}}while(i.byStart[o]&&i.byStart[o].start<=n){p=i.byStart[o];v=p._natives;g=v&&v.type;if(!v||!!f[g]||!!e[g]){if(p.end>n&&p._running===false){p._running=true;e.data.running[g].push(p);if(!e.data.disabled[g]){v.start.call(e,t,p);e.emit(l,m.extend({},p,{plugin:g,type:l}))}}o++}else{m.removeTrackEvent(e,p._id);return}}}else if(r>n){while(i.byStart[o]&&i.byStart[o].start>n){p=i.byStart[o];v=p._natives;g=v&&v.type;if(!v||!!f[g]||!!e[g]){if(p._running===true){p._running=false;y=e.data.running[g];y.splice(y.indexOf(p),1);if(!e.data.disabled[g]){v.end.call(e,t,p);e.emit(c,m.extend({},p,{plugin:g,type:c}))}}o--}else{m.removeTrackEvent(e,p._id);return}}while(i.byEnd[s]&&i.byEnd[s].end>n){h=i.byEnd[s];v=h._natives;g=v&&v.type;if(!v||!!f[g]||!!e[g]){if(h.start<=n&&h._running===false){h._running=true;e.data.running[g].push(h);if(!e.data.disabled[g]){v.start.call(e,t,h);e.emit(l,m.extend({},h,{plugin:g,type:l}))}}s--}else{m.removeTrackEvent(e,h._id);return}}}i.endIndex=s;i.startIndex=o;i.previousUpdateTime=n;i.byStart.length<u&&i.startIndex--;i.byEnd.length<a&&i.endIndex--};m.extend(m.p,{getTrackEvents:function(){return m.getTrackEvents.call(null,this)},getTrackEvent:function(e){return m.getTrackEvent.call(null,this,e)},getLastTrackEventId:function(){return m.getLastTrackEventId.call(null,this)},removeTrackEvent:function(e){m.removeTrackEvent.call(null,this,e);return this},removePlugin:function(e){m.removePlugin.call(null,this,e);return this},timeUpdate:function(e){m.timeUpdate.call(null,this,e);return this},destroy:function(){m.destroy.call(null,this);return this}});m.manifest={};m.registry=[];m.registryByName={};m.plugin=function(e,t,n){if(m.protect.natives.indexOf(e.toLowerCase())>=0){m.error("'"+e+"' is a protected function name");return}var r=["start","end"],i={},s,a=typeof t==="function",f=["_setup","_teardown","start","end","frame"];var l=function(e,t){e=e||m.nop;t=t||m.nop;return function(){e.apply(this,arguments);t.apply(this,arguments)}};m.manifest[e]=n=n||t.manifest||{};f.forEach(function(n){t[n]=g(t[n]||m.nop,e)});var c=function(t,i){if(!i){return this}if(i.ranges&&m.isArray(i.ranges)){m.forEach(i.ranges,function(t){var n=m.extend({},i,t);delete n.ranges;this[e](n)},this);return this}var s=i._natives={},a="",c,h;m.extend(s,t);i._natives.type=e;i._running=false;s.start=s.start||s["in"];s.end=s.end||s["out"];if(i.once){s.end=l(s.end,function(){this.removeTrackEvent(i._id)})}s._teardown=l(function(){var e=o.call(arguments),t=this.data.running[s.type];e.unshift(null);e[1]._running&&t.splice(t.indexOf(i),1)&&s.end.apply(this,e)},s._teardown);i.compose=i.compose&&i.compose.split(" ")||[];i.effect=i.effect&&i.effect.split(" ")||[];i.compose=i.compose.concat(i.effect);i.compose.forEach(function(e){a=m.compositions[e]||{};f.forEach(function(e){s[e]=l(s[e],a[e])})});i._natives.manifest=n;if(!("start"in i)){i.start=i["in"]||0}if(!i.end&&i.end!==0){i.end=i["out"]||Number.MAX_VALUE}if(!u.call(i,"toString")){i.toString=function(){var t=["start: "+i.start,"end: "+i.end,"id: "+(i.id||i._id)];if(i.target!=null){t.push("target: "+i.target)}return e+" ( "+t.join(", ")+" )"}}if(!i.target){h="options"in n&&n.options;i.target=h&&"target"in h&&h.target}if(i._natives){i._id=m.guid(i._natives.type)}i._natives._setup&&i._natives._setup.call(this,i);m.addTrackEvent(this,m.extend(i,i));m.forEach(t,function(e,t){if(t!=="type"){if(r.indexOf(t)===-1){this.on(t,e)}}},this);return this};m.p[e]=i[e]=function(n,r){var i=arguments.length,s,o,u;if(n&&!r){r=n;n=null}else{s=this.getTrackEvent(n);if(!s){r.id=n}else{r=m.extend({},s,r);m.addTrackEvent(this,r);return this}}this.data.running[e]=this.data.running[e]||[];o=this.options.defaults&&this.options.defaults[e]||{};u=m.extend({},o,r);return c.call(this,a?t.call(this,u):t,u)};if(n){m.extend(t,{manifest:n})}var h={fn:i[e],definition:t,base:t,parents:[],name:e};m.registry.push(m.extend(i,h,{type:e}));m.registryByName[e]=h;return i};m.plugin.errors=[];m.plugin.debug=m.version==="@"+"VERSION";m.removePlugin=function(e,t){if(!t){t=e;e=m.p;if(m.protect.natives.indexOf(t.toLowerCase())>=0){m.error("'"+t+"' is a protected function name");return}var n=m.registry.length,r;for(r=0;r<n;r++){if(m.registry[r].name===t){m.registry.splice(r,1);delete m.registryByName[t];delete m.manifest[t];delete e[t];return}}}var i=e.data.trackEvents.byStart,s=e.data.trackEvents.byEnd,o=e.data.trackEvents.animating,u,a;for(u=0,a=i.length;u<a;u++){if(i[u]&&i[u]._natives&&i[u]._natives.type===t){i[u]._natives._teardown&&i[u]._natives._teardown.call(e,i[u]);i.splice(u,1);u--;a--;if(e.data.trackEvents.startIndex<=u){e.data.trackEvents.startIndex--;e.data.trackEvents.endIndex--}}if(s[u]&&s[u]._natives&&s[u]._natives.type===t){s.splice(u,1)}}for(u=0,a=o.length;u<a;u++){if(o[u]&&o[u]._natives&&o[u]._natives.type===t){o.splice(u,1);u--;a--}}};m.compositions={};m.compose=function(e,t,n){m.manifest[e]=n=n||t.manifest||{};m.compositions[e]=t};m.plugin.effect=m.effect=m.compose;var y=/^(?:\.|#|\[)/;m.dom={debug:false,find:function(e,n){var r=null;e=e.trim();n=n||t;if(e){if(!y.test(e)){r=t.getElementById(e);if(r!==null){return r}}try{r=n.querySelector(e)}catch(i){if(m.dom.debug){throw new Error(i)}}}return r}};var b=/\?/,w={url:"",data:"",dataType:"",success:m.nop,type:"GET",async:true,xhr:function(){return new e.XMLHttpRequest}};m.xhr=function(e){e.dataType=e.dataType&&e.dataType.toLowerCase()||null;if(e.dataType&&(e.dataType==="jsonp"||e.dataType==="script")){m.xhr.getJSONP(e.url,e.success,e.dataType==="script");return}var t=m.extend({},w,e);t.ajax=t.xhr();if(t.ajax){if(t.type==="GET"&&t.data){t.url+=(b.test(t.url)?"&":"?")+t.data;t.data=null}t.ajax.open(t.type,t.url,t.async);t.ajax.send(t.data||null);return m.xhr.httpData(t)}};m.xhr.httpData=function(e){var t,n=null,r,i=null;e.ajax.onreadystatechange=function(){if(e.ajax.readyState===4){try{n=JSON.parse(e.ajax.responseText)}catch(s){}t={xml:e.ajax.responseXML,text:e.ajax.responseText,json:n};if(!t.xml||!t.xml.documentElement){t.xml=null;try{r=new DOMParser;i=r.parseFromString(e.ajax.responseText,"text/xml");if(!i.getElementsByTagName("parsererror").length){t.xml=i}}catch(s){}}if(e.dataType){t=t[e.dataType]}e.success.call(e.ajax,t)}};return t};m.xhr.getJSONP=function(e,n,r){var i=t.head||t.getElementsByTagName("head")[0]||t.documentElement,s=t.createElement("script"),o=e.split("?")[1],u=false,a=[],f,l,c;if(o&&!r){a=o.split("&")}if(a.length){l=a[a.length-1].split("=")}f=a.length?l[1]?l[1]:l[0]:"jsonp";if(!o&&!r){e+="?callback="+f}if(f&&!r){if(!!window[f]){f=m.guid(f)}window[f]=function(e){n&&n(e);u=true};e=e.replace(l.join("="),l[0]+"="+f)}s.addEventListener("load",function(){if(r){n&&n()}if(u){delete window[f]}i.removeChild(s)},false);s.src=e;i.insertBefore(s,i.firstChild);return};m.getJSONP=m.xhr.getJSONP;m.getScript=m.xhr.getScript=function(e,t){return m.xhr.getJSONP(e,t,true)};m.util={toSeconds:function(e,t){var n=/^([0-9]+:){0,2}[0-9]+([.;][0-9]+)?$/,r="Invalid time format",i,s,o,u,a,f;if(typeof e==="number"){return e}if(typeof e==="string"&&!n.test(e)){m.error(r)}i=e.split(":");s=i.length-1;o=i[s];if(o.indexOf(";")>-1){a=o.split(";");f=0;if(t&&typeof t==="number"){f=parseFloat(a[1],10)/t}i[s]=parseInt(a[0],10)+f}u=i[0];return{1:parseFloat(u,10),2:parseInt(u,10)*60+parseFloat(i[1],10),3:parseInt(u,10)*3600+parseInt(i[1],10)*60+parseFloat(i[2],10)}[i.length||1]}};m.p.cue=m.p.exec;m.protect={natives:v(m.p).map(function(e){return e.toLowerCase()})};m.forEach({listen:"on",unlisten:"off",trigger:"emit",exec:"cue"},function(e,t){var n=m.p[t];m.p[t]=function(){if(typeof console!=="undefined"&&console.warn){console.warn("Deprecated method '"+t+"', "+(e==null?"do not use.":"use '"+e+"' instead."));m.p[t]=n}return m.p[e].apply(this,[].slice.call(arguments))}});e.Popcorn=m})(window,window.document);(function(e){var t=Array.prototype,n=Object.prototype,r=t.forEach,i=t.slice,s=n.hasOwnProperty,o=n.toString;e.parsers={};e.parser=function(t,n,r){if(e.protect.natives.indexOf(t.toLowerCase())>=0){e.error("'"+t+"' is a protected function name");return}if(typeof n==="function"&&!r){r=n;n=""}if(typeof r!=="function"||typeof n!=="string"){return}var i=e.events.all,o,u={};o=function(t,i){if(!t){return this}var o=this;e.xhr({url:t,dataType:n,success:function(e){var t=r(e),n,u,a,f=0;n=t.data||[];u=n.length;a=null;if(!u){return}for(;f<u;f++){a=n[f];for(var l in a){if(s.call(a,l)&&!!o[l]){o[l](a[l])}}}if(i){i()}}});return this};u[t]=o;e.extend(e.p,u);return u}})(Popcorn);(function(e){document.addEventListener("DOMContentLoaded",function(){var t="data-timeline-sources",n=document.querySelectorAll("["+t+"]");e.forEach(n,function(r,i){var s=n[i],o=false,u,a,f;if(!s.id){s.id=e.guid("__popcorn")}if(s.nodeType&&s.nodeType===1){f=e("#"+s.id);u=(s.getAttribute(t)||"").split(",");if(u[0]){e.forEach(u,function(e){a=e.split("!");if(a.length===1){a=e.match(/(.*)[\/\\]([^\/\\]+\.\w+)$/)[2].split(".");a[0]="parse"+a[1].toUpperCase();a[1]=e}if(u[0]&&f[a[0]]){f[a[0]](a[1])}})}if(!!f.autoplay()){f.play()}}})},false)})(Popcorn);(function(e){function t(e,t){var i=e.substr(10).split(","),s=/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,o=/\\N/gi,u;u={start:n(i[t.start]),end:n(i[t.end])};if(u.start===-1||u.end===-1){throw"Invalid time"}u.text=r(i,t.text).replace(s,"").replace(o,"<br />");return u}function n(e){var t=e.split(":");if(e.length!==10||t.length<3){return-1}return parseInt(t[0],10)*3600+parseInt(t[1],10)*60+parseFloat(t[2],10)}function r(e,t){var n=e.length,r=[],i=t;for(;i<n;i++){r.push(e[i])}return r.join(",")}function i(e,t){var n={};n[e]=t;return n}function s(e){var t=e.substr(8).split(", "),n={},r,i;for(i=0,r=t.length;i<r;i++){if(t[i]==="Start"){n.start=i}else if(t[i]==="End"){n.end=i}else if(t[i]==="Text"){n.text=i}}return n}e.parser("parseSSA",function(e){var n={title:"",remote:"",data:[]},r=/(?:\r\n|\r|\n)/gm,o=[],u,a,f=0,l;u=e.text.split(r);l=u.length;while(f<l&&u[f]!=="[Events]"){f++}a=s(u[++f]);while(++f<l&&u[f]&&u[f][0]!=="["){try{o.push(i("subtitle",t(u[f],a)))}catch(c){}}n.data=o;return n})})(Popcorn);(function(e){e.parser("parseSBV",function(e){var t={title:"",remote:"",data:[]},n=[],r,i=0,s=0,o=0;var u=function(e){var t=e.split(":"),n=t.length-1,r;try{r=parseInt(t[n-1],10)*60+parseFloat(t[n],10);if(n===2){r+=parseInt(t[0],10)*3600}}catch(i){throw"Bad cue"}return r};var a=function(e,t){var n={};n[e]=t;return n};r=e.text.split(/(?:\r\n|\r|\n)/gm);s=r.length;while(i<s){var f={},l=[],c=r[i++].split(",");try{f.start=u(c[0]);f.end=u(c[1]);while(i<s&&r[i]){l.push(r[i++])}f.text=l.join("<br />");n.push(a("subtitle",f))}catch(h){while(i<s&&r[i]){i++}}while(i<s&&!r[i]){i++}}t.data=n;return t})})(Popcorn);(function(e){function t(e,t){var n={};n[e]=t;return n}function n(e){var t=e.split(":");try{var n=t[2].split(",");if(n.length===1){n=t[2].split(".")}return parseFloat(t[0],10)*3600+parseFloat(t[1],10)*60+parseFloat(n[0],10)+parseFloat(n[1],10)/1e3}catch(r){return 0}}function r(e){var t=e.length-1;while(t>=0&&!e[t]){t--}return t}e.parser("parseSRT",function(e){var i={title:"",remote:"",data:[]},s=[],o=0,u=0,a,f,l,c,h;a=e.text.split(/(?:\r\n|\r|\n)/gm);c=r(a)+1;for(o=0;o<c;o++){h={};l=[];h.id=parseInt(a[o++],10);f=a[o++].split(/[\t ]*-->[\t ]*/);h.start=n(f[0]);u=f[1].indexOf(" ");if(u!==-1){f[1]=f[1].substr(0,u)}h.end=n(f[1]);while(o<c&&a[o]){l.push(a[o++])}h.text=l.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");h.text=h.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");h.text=h.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");h.text=h.text.replace(/\\N/gi,"<br />");s.push(t("subtitle",h))}i.data=s;return i})})(Popcorn);(function(e){function r(e,t,n){var u=e.firstChild,a=i(e,n),f=[],l;while(u){if(u.nodeType===1){if(u.nodeName==="p"){f.push(s(u,t,a))}else if(u.nodeName==="div"){l=o(u.getAttribute("begin"));if(l<0){l=t}f.push.apply(f,r(u,l,a))}}u=u.nextSibling}return f}function i(e,t){var n=e.getAttribute("region");if(n!==null){return n}else{return t||""}}function s(e,r,s){var u={};u.text=e.textContent.replace(t,"").replace(n,"<br />");u.id=e.getAttribute("xml:id")||e.getAttribute("id");u.start=o(e.getAttribute("begin"),r);u.end=o(e.getAttribute("end"),r);u.target=i(e,s);if(u.end<0){u.end=o(e.getAttribute("duration"),0);if(u.end>=0){u.end+=u.start}else{u.end=Number.MAX_VALUE}}return{subtitle:u}}function o(t,n){var r;if(!t){return-1}try{return e.util.toSeconds(t)}catch(i){r=u(t);return parseFloat(t.substring(0,r))*a(t.substring(r))+(n||0)}}function u(e){var t=e.length-1;while(t>=0&&e[t]<="9"&&e[t]>="0"){t--}return t}function a(e){return{h:3600,m:60,s:1,ms:.001}[e]||-1}var t=/^[\s]+|[\s]+$/gm,n=/(?:\r\n|\r|\n)/gm;e.parser("parseTTML",function(e){var t={title:"",remote:"",data:[]},n;if(!e.xml||!e.xml.documentElement){return t}n=e.xml.documentElement.firstChild;if(!n){return t}while(n.nodeName!=="body"){n=n.nextSibling}if(n){t.data=r(n,0)}return t})})(Popcorn);(function(e){e.parser("parseTTXT",function(e){var t={title:"",remote:"",data:[]};var n=function(e){var t=e.split(":");var n=0;try{return parseFloat(t[0],10)*60*60+parseFloat(t[1],10)*60+parseFloat(t[2],10)}catch(r){n=0}return n};var r=function(e,t){var n={};n[e]=t;return n};var i=e.xml.lastChild.lastChild;var s=Number.MAX_VALUE;var o=[];while(i){if(i.nodeType===1&&i.nodeName==="TextSample"){var u={};u.start=n(i.getAttribute("sampleTime"));u.text=i.getAttribute("text");if(u.text){u.end=s-.001;o.push(r("subtitle",u))}s=u.start}i=i.previousSibling}t.data=o.reverse();return t})})(Popcorn);(function(e){function t(e){var t=e.split(":"),n=e.length,r;if(n!==12&&n!==9){throw"Bad cue"}n=t.length-1;try{r=parseInt(t[n-1],10)*60+parseFloat(t[n],10);if(n===2){r+=parseInt(t[0],10)*3600}}catch(i){throw"Bad cue"}return r}function n(e,t){var n={};n[e]=t;return n}function r(e){var n,r,i={},s=/-->/,o=/[\t ]+/;if(!e||e.indexOf("-->")===-1){throw"Bad cue"}n=e.replace(s," --> ").split(o);if(n.length<2){throw"Bad cue"}i.id=e;i.start=t(n[0]);i.end=t(n[2]);return i}function i(e,t,n){while(n<t&&!e[n]){n++}return n}function s(e,t,n){while(n<t&&e[n]){n++}return n}e.parser("parseVTT",function(e){var t={title:"",remote:"",data:[]},o=[],u=0,a=0,f,l,c,h=/(?:\r\n|\r|\n)/gm;f=e.text.split(h);a=f.length;if(a===0||f[0]!=="WEBVTT"){return t}u++;while(u<a){l=[];try{u=i(f,a,u);c=r(f[u++]);while(u<a&&f[u]){l.push(f[u++])}c.text=l.join("<br />");o.push(n("subtitle",c))}catch(p){u=s(f,a,u)}}t.data=o;return t})})(Popcorn);(function(e){e.parser("parseXML","XML",function(t){var n={title:"",remote:"",data:[]},r={};var i=function(e){var t=e.split(":");if(t.length===1){return parseFloat(t[0],10)}else if(t.length===2){return parseFloat(t[0],10)+parseFloat(t[1]/12,10)}else if(t.length===3){return parseInt(t[0]*60,10)+parseFloat(t[1],10)+parseFloat(t[2]/12,10)}else if(t.length===4){return parseInt(t[0]*3600,10)+parseInt(t[1]*60,10)+parseFloat(t[2],10)+parseFloat(t[3]/12,10)}};var s=function(t){var n={};for(var s=0,o=t.length;s<o;s++){var u=t.item(s).nodeName,a=t.item(s).nodeValue;if(u==="in"){n.start=i(a)}else if(u==="out"){n.end=i(a)}else if(u==="resourceid"){e.extend(n,r[a])}else{n[u]=a}}return n};var o=function(e,t){var n={};n[e]=t;return n};var u=function(t,i,a){var f={};e.extend(f,i,s(t.attributes),{text:t.textContent});var l=t.childNodes;if(l.length<1||l.length===1&&l[0].nodeType===3){if(!a){n.data.push(o(t.nodeName,f))}else{r[f.id]=f}}else{for(var c=0;c<l.length;c++){if(l[c].nodeType===1){u(l[c],f,a)}}}};var a=t.documentElement.childNodes;for(var f=0,l=a.length;f<l;f++){if(a[f].nodeType===1){if(a[f].nodeName==="manifest"){u(a[f],{},true)}else{u(a[f],{},false)}}}return n})})(Popcorn);(function(e){e.plugin("footnote",{manifest:{about:{name:"Popcorn Footnote Plugin",version:"0.2",author:"@annasob, @rwaldron",website:"annasob.wordpress.com"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},text:{elem:"input",type:"text",label:"Text"},target:"footnote-container"}},_setup:function(t){var n=e.dom.find(t.target);t._container=document.createElement("div");t._container.style.display="none";t._container.innerHTML=t.text;if(!n){throw new Error("target container doesn't exist")}n.appendChild(t._container)},start:function(e,t){t._container.style.display="inline"},end:function(e,t){t._container.style.display="none"},_teardown:function(t){var n=e.dom.find(t.target);if(n){n.removeChild(t._container)}}})})(Popcorn);(function(e){e.plugin("code",function(t){var n=false,r=this;var i=function(){var e=function(e){return function(t,i){var s=function(){n&&t.call(r,i);n&&e(s)};s()}};if(window.webkitRequestAnimationFrame){return e(window.webkitRequestAnimationFrame)}else if(window.mozRequestAnimationFrame){return e(window.mozRequestAnimationFrame)}else{return e(function(e){window.setTimeout(e,16)})}}();if(!t.onStart||typeof t.onStart!=="function"){if(e.plugin.debug){throw new Error("Popcorn Code Plugin Error: onStart must be a function.")}t.onStart=e.nop}if(t.onEnd&&typeof t.onEnd!=="function"){if(e.plugin.debug){throw new Error("Popcorn Code Plugin Error: onEnd  must be a function.")}t.onEnd=undefined}if(t.onFrame&&typeof t.onFrame!=="function"){if(e.plugin.debug){throw new Error("Popcorn Code Plugin Error: onFrame  must be a function.")}t.onFrame=undefined}return{start:function(e,t){t.onStart.call(r,t);if(t.onFrame){n=true;i(t.onFrame,t)}},end:function(e,t){if(t.onFrame){n=false}if(t.onEnd){t.onEnd.call(r,t)}}}},{about:{name:"Popcorn Code Plugin",version:"0.1",author:"David Humphrey (@humphd)",website:"http://vocamus.net/dave"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},onStart:{elem:"input",type:"function",label:"onStart"},onFrame:{elem:"input",type:"function",label:"onFrame",optional:true},onEnd:{elem:"input",type:"function",label:"onEnd"}}})})(Popcorn);(function(e){function r(e){function o(){var t=e.getBoundingClientRect(),n=i.getBoundingClientRect();if(n.left!==t.left){i.style.left=t.left+"px"}if(n.top!==t.top){i.style.top=t.top+"px"}}var r=-1,i=document.createElement("div"),s=getComputedStyle(e).zIndex;i.setAttribute("data-popcorn-helper-container",true);i.style.position="absolute";if(!isNaN(s)){i.style.zIndex=s+1}else{i.style.zIndex=t}document.body.appendChild(i);return{element:i,start:function(){r=setInterval(o,n)},stop:function(){clearInterval(r);r=-1},destroy:function(){document.body.removeChild(i);if(r!==-1){clearInterval(r)}}}}var t=2e3,n=10;e.plugin("image",{manifest:{about:{name:"Popcorn image Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"number",label:"In"},end:{elem:"input",type:"number",label:"Out"},href:{elem:"input",type:"url",label:"anchor URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png",optional:true},target:"image-container",src:{elem:"input",type:"url",label:"Source URL","default":"http://mozillapopcorn.org/wp-content/themes/popcorn/images/for_developers.png"},text:{elem:"input",type:"text",label:"Text",optional:true}}},_setup:function(t){var n=document.createElement("img"),i=document.getElementById(t.target);t.anchor=document.createElement("a");t.anchor.style.position="relative";t.anchor.style.textDecoration="none";t.anchor.style.display="none";if(!i&&e.plugin.debug){throw new Error("target container doesn't exist")}if(i){if(["VIDEO","AUDIO"].indexOf(i.nodeName)>-1){t.trackedContainer=r(i);t.trackedContainer.element.appendChild(t.anchor)}else{i.appendChild(t.anchor)}}n.addEventListener("load",function(){n.style.borderStyle="none";t.anchor.href=t.href||t.src||"#";t.anchor.target="_blank";var r,s;n.style.height=i.style.height;n.style.width=i.style.width;t.anchor.appendChild(n);if(t.text){r=n.height/12+"px";s=document.createElement("div");e.extend(s.style,{color:"black",fontSize:r,fontWeight:"bold",position:"relative",textAlign:"center",width:n.style.width||n.width+"px",zIndex:"10"});s.innerHTML=t.text||"";s.style.top=(n.style.height.replace("px","")||n.height)/2-s.offsetHeight/2+"px";t.anchor.insertBefore(s,n)}},false);n.src=t.src},start:function(e,t){t.anchor.style.display="inline";if(t.trackedContainer){t.trackedContainer.start()}},end:function(e,t){t.anchor.style.display="none";if(t.trackedContainer){t.trackedContainer.stop()}},_teardown:function(e){if(e.trackedContainer){e.trackedContainer.destroy()}else if(e.anchor.parentNode){e.anchor.parentNode.removeChild(e.anchor)}}})})(Popcorn);(function(e){var t=0,n=function(t,n){var r=t.container=document.createElement("div"),i=r.style,s=t.media;var o=function(){var e=t.position();i.fontSize="18px";i.width=s.offsetWidth+"px";i.top=e.top+s.offsetHeight-r.offsetHeight-40+"px";i.left=e.left+"px";setTimeout(o,10)};r.id=n||e.guid();i.position="absolute";i.color="white";i.textShadow="black 2px 2px 6px";i.fontWeight="bold";i.textAlign="center";o();t.media.parentNode.appendChild(r);return r};e.plugin("subtitle",{manifest:{about:{name:"Popcorn Subtitle Plugin",version:"0.1",author:"Scott Downe",website:"http://scottdowne.wordpress.com/"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},target:"subtitle-container",text:{elem:"input",type:"text",label:"Text"}}},_setup:function(e){var r=document.createElement("div");r.id="subtitle-"+t++;r.style.display="none";!this.container&&(!e.target||e.target==="subtitle-container")&&n(this);if(e.target&&e.target!=="subtitle-container"){e.container=document.getElementById(e.target)||n(this,e.target)}else{e.container=this.container}document.getElementById(e.container.id)&&document.getElementById(e.container.id).appendChild(r);e.innerContainer=r;e.showSubtitle=function(){e.innerContainer.innerHTML=e.text||""}},start:function(e,t){t.innerContainer.style.display="inline";t.showSubtitle(t,t.text)},end:function(e,t){t.innerContainer.style.display="none";t.innerContainer.innerHTML=""},_teardown:function(e){e.container.removeChild(e.innerContainer)}})})(Popcorn);(function(e){var t=1;e.plugin("timeline",function(n){var r=document.getElementById(n.target),s=document.createElement("div"),o,u=true;if(r&&!r.firstChild){r.appendChild(o=document.createElement("div"));o.style.width="inherit";o.style.height="inherit";o.style.overflow="auto"}else{o=r.firstChild}s.style.display="none";s.id="timelineDiv"+t;n.direction=n.direction||"up";if(n.direction.toLowerCase()==="down"){u=false}if(r&&o){if(u){o.insertBefore(s,o.firstChild)}else{o.appendChild(s)}}else if(e.plugin.debug){throw new Error("target container doesn't exist")}t++;s.innerHTML="<p><span id='big' style='font-size:24px; line-height: 130%;' >"+n.title+"</span><br />"+"<span id='mid' style='font-size: 16px;'>"+n.text+"</span><br />"+n.innerHTML;return{start:function(e,t){s.style.display="block";if(t.direction==="down"){o.scrollTop=o.scrollHeight}},end:function(e,t){s.style.display="none"},_teardown:function(e){o&&s&&o.removeChild(s)&&!o.firstChild&&r.removeChild(o)}}},{about:{name:"Popcorn Timeline Plugin",version:"0.1",author:"David Seifried @dcseifried",website:"dseifried.wordpress.com"},options:{start:{elem:"input",type:"text",label:"In"},end:{elem:"input",type:"text",label:"Out"},target:"feed-container",title:{elem:"input",type:"text",label:"title"},text:{elem:"input",type:"text",label:"text"},innerHTML:{elem:"input",type:"text",label:"innerHTML",optional:true},direction:{elem:"select",options:["DOWN","UP"],label:"direction",optional:true}}})})(Popcorn)